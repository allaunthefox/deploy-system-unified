# =============================================================================
# Audit Event Identifier: DSU-INV-700002
# Inventory Type: Group Variables (Production)
# Description: Applied to all hosts in the production group
# Last Updated: 2026-02-28
# Version: 1.0
# =============================================================================
---
# Production Group Variables
# Applied to all hosts in the production group

# Deployment Profile
deployment_profile: "production"

# Security Settings (Production)
core_security_fail_secure: true
firewall_enabled: true
monitoring_enabled: true
system_monitoring_forensics_enabled: true
system_monitoring_loki_enabled: true
system_monitoring_dashboard_forensic: true
system_storage_hardened_integrity_mandatory: true

# Secrets Management
secrets_provider_mode: "sops"
sops_age_key_file: "/etc/sops/age/keys.txt"

# Kubernetes Settings
kubernetes_enabled: true
kubernetes_version: "v1.31.4+k3s1"
kubernetes_pod_cidr: "172.16.0.0/16"
kubernetes_service_cidr: "172.17.0.0/16"
kubernetes_cluster_dns: "172.17.0.10"
kubernetes_flannel_backend: "host-gw"
kubernetes_proxy_mode: "nftables"
kubernetes_disable_network_policy: true

# Storage Configuration
storage_class: "nfs-client"
nfs_server: "192.168.1.100"
nfs_path: "/export/kubernetes"

# Ingress Configuration
ingress_controller: "caddy"
ingress_tls_enabled: true
tls_cert_manager_enabled: true
tls_email: "admin@example.com"
tls_cluster_issuer: "letsencrypt-prod"

# Monitoring Stack (Production)
monitoring_stack_enabled: true
monitoring_persistence_enabled: true
monitoring_storage_size: "50Gi"
monitoring_retention_days: 15
monitoring_resources:
  prometheus:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "4Gi"
      cpu: "2000m"
  grafana:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

# Media Stack (Production)
media_stack_enabled: true
media_persistence_enabled: true
media_gpu_enabled: false
media_resources:
  jellyfin:
    requests:
      memory: "2Gi"
      cpu: "1000m"
    limits:
      memory: "8Gi"
      cpu: "4000m"
  radarr:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"
  sonarr:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

# Logging Stack (Production)
logging_stack_enabled: true
logging_persistence_enabled: true
logging_storage_size: "100Gi"
logging_retention_days: 30

# Database Stack (Production)
database_stack_enabled: true
database_persistence_enabled: true
database_resources:
  postgresql:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "4Gi"
      cpu: "2000m"
  redis:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "500m"

# Backup Configuration
backup_stack_enabled: true
backup_enabled: true
backup_schedule: "0 2 * * *"
backup_retention_days: 30
backup_storage: "s3"
s3_bucket: "kubernetes-backups"
s3_region: "us-east-1"

# Auth Stack (Production)
auth_stack_enabled: true
authentik_enabled: true

# Network Stack (Production)
network_stack_enabled: true
pihole_enabled: true
wireguard_enabled: false

# Proxy Stack (Production)
proxy_stack_enabled: true
caddy_enabled: true

# Security Stack (Production)
security_stack_enabled: true
crowdsec_enabled: true
trivy_enabled: true

# Ops Stack (Production)
ops_stack_enabled: true
homarr_enabled: true
vaultwarden_enabled: true

# Resource Management
production_resource_limits: true
production_resource_requests: true

# High Availability
ha_enabled: true
replica_count: 3
pod_disruption_budget_enabled: true

# Network Policies
network_policy_enabled: true
default_deny_ingress: true
default_deny_egress: false

# Pod Security
pod_security_standard: "restricted"
pod_security_enforce: "restricted"
pod_security_audit: "restricted"
pod_security_warn: "restricted"
