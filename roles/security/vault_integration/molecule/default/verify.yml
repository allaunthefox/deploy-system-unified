# =============================================================================
# Audit Event Identifier: DSU-TST-1000374
# Last Updated: 2026-02-28
# =============================================================================
---
# NIST SP 800-53 | ISO 27001 ยง14.2
- name: Verify
  hosts: all
  become: true
  gather_facts: false
  tasks:
    - name: Verify vault binary exists
      ansible.builtin.command:
        cmd: which vault
      register: vault_check
      failed_when: false
      changed_when: false

    - name: Verify vault integration is complete
      ansible.builtin.assert:
        that:
          - vault_integration_complete | default(false) == true
        fail_msg: "Vault integration was not completed"
