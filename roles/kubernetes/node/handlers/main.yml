---
# Handlers for kubernetes/node role

- name: reload_systemd
  ansible.builtin.systemd:
    daemon_reload: true
  become: true
  listen: "reload systemd"
  failed_when: false

- name: restart_k3s_agent
  ansible.builtin.systemd:
    name: k3s-agent
    state: restarted
  become: true
  listen: "restart k3s-agent"
  when: ansible_service_mgr == 'systemd'
  failed_when: false
