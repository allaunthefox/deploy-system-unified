# =============================================================================
# Audit Event Identifier: DSU-ARG-100230
# Last Updated: 2026-03-01
# =============================================================================
---
argument_specs:
  main:
    short_description: Pre-deployment system validation and compliance checking
    description:
      - This role performs a suite of pre-deployment checks to ensure the target system meets all hardware, software, and compliance requirements.
    options:
      preflight_require_systemd:
        type: bool
        default: true
        description: Whether to strictly require a systemd-based environment.
      preflight_check_memory:
        type: bool
        default: false
        description: Whether to validate the available physical memory.
      preflight_min_memory_mb:
        type: int
        default: 512
        description: The minimum required RAM in megabytes.
      preflight_check_network:
        type: bool
        default: false
        description: Whether to perform outbound connectivity checks.
      preflight_connectivity_check_url:
        type: str
        default: "https://1.1.1.1"
        description: The URL used for network connectivity validation.
      preflight_required_binaries:
        type: list
        elements: str
        default: []
        description: List of mandatory binaries that must be present in the system PATH.
      preflight_check_license:
        type: bool
        default: true
        description: Whether to perform dependency license compliance checks.
      preflight_strict_license_check:
        type: bool
        default: false
        description: If true, fails the play on any non-compliant license.
      preflight_install_license_tools:
        type: bool
        default: false
        description: Whether to automatically install required license scanning tools.
      preflight_become_pip:
        type: bool
        default: false
        description: Whether to use privilege escalation for pip operations.
      preflight_check_gpu_vendor:
        type: bool
        default: false
        description: Whether to validate the configured GPU vendor against detected hardware.
      preflight_strict_gpu_vendor:
        type: bool
        default: true
        description: If true, fails the play if the configured GPU vendor is not detected.
      preflight_check_container_runtime:
        type: bool
        default: false
        description: Whether to validate the presence of a container runtime.
      preflight_required_container_runtime:
        type: str
        default: "podman"
        choices: ["podman", "docker"]
        description: The expected container runtime.
      preflight_check_kubernetes:
        type: bool
        default: false
        description: Whether to perform Kubernetes-specific connectivity and tooling checks.
      preflight_require_kubectl:
        type: bool
        default: true
        description: Whether to require the kubectl binary to be present.
      preflight_require_cluster_connectivity:
        type: bool
        default: false
        description: Whether to verify actual connectivity to a Kubernetes cluster API.
