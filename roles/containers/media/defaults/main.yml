# =============================================================================
# Audit Event Identifier: DSU-PLY-100087
# Last Updated: 2026-02-28
# =============================================================================
# CIS Docker Benchmark | Pod Security Standards
# Defaults for containers/media

# Multi-Tenancy / Instance Identification
containers_media_instance_name: "{{ media_instance_name | default('default') }}"
containers_media_port_offset: "{{ media_port_offset | default(0) }}"
# Network name the role will create for media pods (can be overridden)
containers_media_network: "{{ media_network | default('media_net') }}"

# Hardware Acceleration
# Enables passing /dev/dri to relevant containers (Jellyfin, Plex, potentially TDARR if added)
containers_media_hw_accel: "{{ media_hw_accel | default(false) }}"
# Require Host AVX support for MongoDB/Jellyfin images (Fail if missing)
containers_media_require_avx: "{{ media_require_avx | default(false) }}"

containers_media_stack_enable: "{{ media_stack_enable | default(true) }}"
containers_media_root_dir: "{{ media_root_dir | default('/srv/media/' ~ containers_media_instance_name) }}"
containers_media_config_dir: "{{ media_config_dir | default('/srv/containers/media_config/' ~ containers_media_instance_name) }}"

# User/Group for media permissions (Podman rootless or mapped)
containers_media_puid: "{{ media_puid | default(1000) }}"
containers_media_pgid: "{{ media_media_pgid | default(1000) }}"
containers_media_timezone: "{{ media_timezone | default('UTC') }}"

# Jellyfin (Media Server)
containers_jellyfin_enable: true
containers_jellyfin_image_digest: "sha256:4f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a4f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_jellyfin_image: "docker.io/jellyfin/jellyfin:10.11.6@{{ containers_jellyfin_image_digest }}"
containers_jellyfin_port_http: 8096
containers_jellyfin_memory_max: 8G
containers_jellyfin_use_unix_socket: "{{ true if deployment_profile | default('standard') in ['hardened', 'production'] else false }}"
containers_jellyfin_socket_path: "/run/caddy/jellyfin.sock"

# Plex (Media Server Alternative)
containers_plex_enable: "{{ plex_enable | default(false) }}"
containers_plex_image_digest: "sha256:5f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a5f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_plex_image: "{{ 'none' if not containers_plex_enable | bool else 'docker.io/plexinc/pms-docker:1.43.0.10467-2b1ba6e69@' ~ containers_plex_image_digest }}"
containers_plex_port_http: "{{ plex_port_http | default(32400) }}"
containers_plex_claim_token: "{{ plex_claim_token | default('') }}"

containers_radarr_enable: true
containers_radarr_image_digest: "sha256:6f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a6f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_radarr_image: "docker.io/linuxserver/radarr:6.0.4@{{ containers_radarr_image_digest }}"
containers_radarr_port: "{{ radarr_port | default(7878) }}"

containers_sonarr_enable: true
containers_sonarr_image_digest: "sha256:7f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a7f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_sonarr_image: "docker.io/linuxserver/sonarr:4.0.16@{{ containers_sonarr_image_digest }}"
containers_sonarr_port: "{{ sonarr_port | default(8989) }}"

containers_lidarr_enable: "{{ lidarr_enable | default(false) }}"
containers_lidarr_image_digest: "sha256:8f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a8f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_lidarr_image: "docker.io/linuxserver/lidarr:3.1.0@{{ containers_lidarr_image_digest }}"
containers_lidarr_port: "{{ lidarr_port | default(8686) }}"

containers_readarr_enable: "{{ readarr_enable | default(false) }}"
containers_readarr_image_digest: "sha256:9f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a9f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_readarr_image: "docker.io/tainrs/readarr:develop@{{ containers_readarr_image_digest }}"
containers_readarr_port: "{{ readarr_port | default(8787) }}"

containers_prowlarr_enable: true
containers_prowlarr_image_digest: "sha256:0f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a0f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_prowlarr_image: "docker.io/linuxserver/prowlarr:2.3.0@{{ containers_prowlarr_image_digest }}"
containers_prowlarr_port: "{{ prowlarr_port | default(9696) }}"

# Sub-services
containers_jellyseerr_enable: "{{ jellyseerr_enable | default(false) }}"
containers_jellyseerr_image_digest: "sha256:1f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a1f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_jellyseerr_image: "docker.io/fallenbagel/jellyseerr:2.7.3@{{ containers_jellyseerr_image_digest }}"
containers_jellyseerr_port: "{{ jellyseerr_port | default(5055) }}"

containers_navidrome_enable: "{{ navidrome_enable | default(false) }}"
containers_navidrome_image_digest: "sha256:2f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a2f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_navidrome_image: "docker.io/deluan/navidrome:0.59.0@{{ containers_navidrome_image_digest }}"
containers_navidrome_port: "{{ navidrome_port | default(4533) }}"

# Download Client (Transmission)
containers_transmission_enable: true
containers_transmission_image_digest: "sha256:3f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a3f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_transmission_image: "docker.io/linuxserver/transmission:4.1.0@{{ containers_transmission_image_digest }}"
containers_transmission_port_web: "{{ transmission_port_web | default(9091) }}"
containers_transmission_port_peer: "{{ transmission_port_peer | default(51413) }}"
containers_transmission_user: "{{ transmission_user | default('CHANGE_ME_IN_SOPS') }}"
containers_transmission_pass: "{{ transmission_pass | default('CHANGE_ME_IN_SOPS') }}"

# Networking
# If true, all containers share a pod (e.g., 'media-pod') for local communication
containers_media_pod_enable: true
containers_media_pod_name: "{{ media_pod_name | default('media_pod_' ~ containers_media_instance_name) }}"

# Reverse Proxy Configuration (Gatekeeper Mode)
containers_media_gatekeeper_mode: "{{ media_gatekeeper_mode | default(false) }}"
containers_media_domain: "{{ media_domain | default('media.example.com') }}"
# Network to attach the pod to (must match Caddy's network if separate)
containers_media_pod_network: "{{ media_pod_network | default(containers_media_network) }}"

# Authentication Integration
containers_media_auth_provider: "{{ media_auth_provider | default('none') }}"
containers_media_auth_url: "{{ media_auth_url | default('https://auth.example.com') }}"

# Hardening: fail-secure gating for media secret checks
containers_media_fail_secure: "{{ containers_fail_secure | default(true) }}"

# Bazarr (Subtitle Management)
containers_bazarr_enable: "{{ bazarr_enable | default(true) }}"
containers_bazarr_image_digest: "sha256:4f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a4f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_bazarr_image: "lscr.io/linuxserver/bazarr:1.5.5@{{ containers_bazarr_image_digest }}"
containers_bazarr_port: "{{ bazarr_port | default(6767) }}"

# Kavita (Manga/Comics Server)
containers_kavita_enable: "{{ kavita_enable | default(true) }}"
containers_kavita_image_digest: "sha256:5f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a5f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_kavita_image: "docker.io/jvmilazz0/kavita:0.8.9@{{ containers_kavita_image_digest }}"
containers_kavita_port: "{{ kavita_port | default(5000) }}"

# Audiobookshelf (Audiobook Server)
containers_audiobookshelf_enable: "{{ audiobookshelf_enable | default(true) }}"
containers_audiobookshelf_image_digest: "sha256:6f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a6f0e0d0a0b0c0d0e0f0a0b0c0d0e0f0a" # Example
containers_audiobookshelf_image: "ghcr.io/advplyr/audiobookshelf:2.32.1@{{ containers_audiobookshelf_image_digest }}"
containers_audiobookshelf_port: "{{ audiobookshelf_port | default(13378) }}"
