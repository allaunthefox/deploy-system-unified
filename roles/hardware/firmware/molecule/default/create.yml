---
- name: Create
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: Create firmware test containers
      containers.podman.podman_container:
        name: "{{ item.name }}"
        image: "{{ item.image }}"
        command: /lib/systemd/systemd
        privileged: true
        volumes:
          - /sys/fs/cgroup:/sys/fs/cgroup:rw
        tmpfs:
          /run: "rw"
          /tmp: "rw"
        state: started
      loop:
        - { name: 'firmware-ubuntu-2204', image: 'docker.io/geerlingguy/docker-ubuntu2204-ansible:latest' }
        - { name: 'firmware-debian-12', image: 'docker.io/geerlingguy/docker-debian12-ansible:latest' }
        - { name: 'firmware-rockylinux-9', image: 'docker.io/geerlingguy/docker-rockylinux9-ansible:latest' }
