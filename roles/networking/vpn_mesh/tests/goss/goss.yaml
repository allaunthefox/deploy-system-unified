# Goss tests for networking/vpn_mesh role

# =============================================================================
# PACKAGE TESTS
# =============================================================================
package:
  wireguard-tools:
    installed: true

# =============================================================================
# FILE TESTS
# =============================================================================
file:
  /etc/wireguard:
    exists: true
    filetype: directory
    mode: "0700"

# =============================================================================
# COMMAND TESTS
# =============================================================================
command:
  wg_version:
    exec: 'wg --version'
    exit-status: 0
    timeout: 10000

  wg_show:
    exec: 'wg show || true'
    exit-status: 0
    timeout: 10000
