# Forensic Deployment Flow

**Audit Event Identifier:** DSU-MMD-180003  
**Mermaid Version:** 1.2  
**Renderer Support:** GitHub, GitLab, Mermaid Live  
**Last Updated:** 2026-02-28  

This diagram visualizes how the **Deploy-System-Unified** project enforces forensic traceability from the initial playbook execution to the final auditable log.

```mermaid
graph TD
    A[User / CI] -->|Executes| B[PRODUCTION_DEPLOY.yml]
    B -->|Imports| C[BASE_HARDENED.yml]
    
    subgraph "Forensic Enforcement Layer"
        C -->|Runs Wrapper| D{tasks/RUN_ROLE.YML}
        D -->|Standard Check| E[ISO 9001 | 600013 | Determine Role]
        E -->|Integrity Gate| F[ISO 27037 | 520000 | Checkpoint]
    end

    subgraph "Hardened Roles"
        F --> G[security/hardening]
        F --> H[security/sshd]
        F --> I[containers/media]
    end

    subgraph "Forensic Telemetry"
        G -->|Audit Event Identifier 840040| J[Loki Log Stream]
        H -->|Audit Event Identifier 400101| J
        I -->|Audit Event Identifier 700000| J
    end

    J -->|Visualization| K[Grafana Forensic Dashboard]
    
    style J fill:#f96,stroke:#333,stroke-width:2px
    style K fill:#bbf,stroke:#333,stroke-width:4px
```

---

## ðŸ§© Components

1.  **Entrypoint**: `PRODUCTION_DEPLOY.yml` serves as the compliant launchpad.
2.  **Wrapper**: `RUN_ROLE.YML` ensures that even role switches are forensically logged.
3.  **Audit Event Identifiers**: Unique 6-digit codes map actions to ISO standards.
4.  **Loki/Grafana**: The destination for all forensic telemetry.

*Generated by Mermaid Flowchart Generator*
*Last Updated: February 2026*
