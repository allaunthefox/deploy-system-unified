---
# Tasks for security/inter_pod_encryption - Kernel Readiness for Encrypted Traffic
- name: Ensure Wireguard kernel module is available
  community.general.modprobe:
    name: wireguard
    state: present
  become: true

- name: Verify IPsec/ESP kernel modules for inter-node security
  community.general.modprobe:
    name: "{{ item }}"
    state: present
  loop:
    - af_key
    - xfrm_user
  become: true

- name: Report encryption readiness
  ansible.builtin.debug:
    msg: "System is ready for Wireguard/IPSec based inter-pod encryption"
