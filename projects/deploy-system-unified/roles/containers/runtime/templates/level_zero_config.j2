# Intel Level Zero Configuration
# This file is automatically generated by Ansible

# Level Zero API configuration
[LevelZero]
  Enabled = {{ containers_gpu_slicing.level_zero.enabled }}
  Verbosity = "info"

{% if containers_gpu_slicing.level_zero.enabled %}
# Device partitions
{% for partition in containers_gpu_slicing.level_zero.partitions %}
[LevelZero.Device.{{ loop.index0 }}]
  Name = "{{ partition.name | default('partition' + loop.index0 | string) }}"
  Memory = "{{ partition.memory | default('50%') }}"
  ComputeUnits = {{ partition.compute_units | default(4) }}
  {% if partition.virtualization is defined %}
  Virtualization = "{{ partition.virtualization }}"
  {% endif %}
{% endfor %}

# Process and thread limits
[LevelZero.Process]
  MaxDevicesPerProcess = {{ containers_gpu_count_detected }}
  MaxContextsPerDevice = 8

[LevelZero.Thread]
  MaxContextsPerThread = 4
  MaxEventsPerContext = 1024
{% endif %}